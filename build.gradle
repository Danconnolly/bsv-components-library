plugins {
    id 'java'
    id 'maven-publish'
}

/****************************************
 * Local Configuration
 ****************************************/
jclGroup = "$jclGroup"
jclVersion = "$jclVersion"

sourceCompatibility = "11"
targetCompatibility = "11"

configurations {
    childJars
}

repositories {
    mavenCentral()
    jcenter()
    mavenLocal()
    maven {
        url = "http://aire.sleepingsalmon.com:2095/repository/maven-releases/"
        allowInsecureProtocol = true
        credentials {
            username = "$nexusUser"
            password = "$nexusPassword"
        }
    }
}

/****************************************
 * Build the JAR - Include all sub project classes and dependencies
 ****************************************/
dependencies {
    subprojects.each {
        childJars project(it.path)
    }
}

jar {
    dependsOn configurations.childJars
    from { configurations.childJars.collect { zipTree(it) } }
}
